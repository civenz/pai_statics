(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1659],{48170:function(n,t,e){Promise.resolve().then(e.bind(e,18161))},50921:function(n,t,e){"use strict";e.d(t,{Sx:function(){return J},Xv:function(){return O},UC:function(){return E},uA:function(){return L},QI:function(){return G},p$:function(){return M},Rz:function(){return X},pk:function(){return H},Ys:function(){return D},L4:function(){return z},uS:function(){return B},Nv:function(){return Q},ME:function(){return W},iw:function(){return V},NF:function(){return T},vG:function(){return Y},AX:function(){return K},uk:function(){return A},ad:function(){return R}});var r=e(45008),s=e(2559);function i(){let n=(0,r._)(["\n  fragment postListItemFragment on Post {\n    id\n    title\n    slug\n    summary\n    url\n    cover_image\n    publish_status\n    view_count\n    status\n    status_desc\n    created_at\n    published_at\n    publish_at_diff_humans\n    deleted_at\n  }\n"]);return i=function(){return n},n}function u(){let n=(0,r._)(["\n  fragment paginatorInfoFragment on PaginatorInfo {\n    count\n    currentPage\n    firstItem\n    hasMorePages\n    lastItem\n    lastPage\n    perPage\n    total\n  }\n"]);return u=function(){return n},n}function o(){let n=(0,r._)(["\n  fragment replayPageInfoFragment on PageInfo {\n      endCursor\n      count\n      currentPage\n      hasNextPage\n      hasPreviousPage\n      lastPage\n      startCursor\n      total\n    }\n"]);return o=function(){return n},n}let a=(0,s.Ps)(i()),l=(0,s.Ps)(u()),c=(0,s.Ps)(o());function d(){let n=(0,r._)(["\n  query GetPostsByCategory(\n    $category: String\n    $first: Int = 10\n    $after: String\n  ) {\n    posts(first: $first, after: $after, term_ids: $category) {\n      edges {\n        cursor\n        node {\n          ...postListItemFragment\n          user {\n            name\n          }\n          team {\n            slug\n            name\n          }\n          tags {\n            name\n            slug\n          }\n        }\n      }\n      pageInfo {\n        ...replayPageInfoFragment\n      }\n    }\n  }\n  ","\n  ","\n"]);return d=function(){return n},n}function f(){let n=(0,r._)(["\n  query GetCategorys {\n    categories {\n      id\n      name\n      slug\n    }\n  }\n"]);return f=function(){return n},n}function g(){let n=(0,r._)(["\n  query GetNews($first: Int = 20, $after: String) {\n    posts(first: $first, show_mode: News, after: $after) {\n      edges {\n        cursor\n        node {\n          ...postListItemFragment\n        }\n      }\n      pageInfo {\n        ...replayPageInfoFragment\n      }\n    }\n  }\n  ","\n  ","\n"]);return g=function(){return n},n}function m(){let n=(0,r._)(["\n  query GetPost($slug: String!) {\n    post(slug: $slug) {\n      ...postListItemFragment\n      body\n      source_url\n      user {\n        name\n        nickname\n        image\n      }\n      team {\n        slug\n        name\n        description\n        avatar\n      }\n      tags {\n        name\n        slug\n      }\n    }\n  }\n  ","\n"]);return m=function(){return n},n}function p(){let n=(0,r._)(["\n  query GetPosts(\n    $first: Int = 20\n    $after: String\n    $show_mode: PostShowMode\n    $type: PostType\n    $category: String\n    $tag: String\n  ) {\n    posts(\n      first: $first\n      after: $after\n      show_mode: $show_mode\n      type: $type\n      term_ids: $category\n      tag_ids: $tag\n    ) {\n      edges {\n        cursor\n        node {\n          ...postListItemFragment\n          user {\n            name\n            nickname\n            image\n          }\n          team {\n            slug\n            name\n            avatar\n          }\n          tags {\n            name\n            slug\n          }\n        }\n      }\n      pageInfo {\n        ...replayPageInfoFragment\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return n},n}function h(){let n=(0,r._)(["\n  query MyPosts(\n    $first: Int!\n    $page: Int\n    $status: [PostStatus]\n    $publish_status: [PostPublishStatus]\n  ) {\n    viewer {\n      name\n      email\n      posts(\n        first: $first\n        page: $page\n        status: $status\n        publish_status: $publish_status\n      ) {\n        data {\n          ...postListItemFragment\n        }\n        paginatorInfo {\n          ...paginatorInfoFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return n},n}function _(){let n=(0,r._)(["\n  query GetHotTags {\n    hotTags {\n      id\n      name\n      slug\n    }\n  }\n"]);return _=function(){return n},n}function b(){let n=(0,r._)(["\n  mutation DeletePost($id: ID!) {\n    deletePost(id: $id) {\n      id\n      slug\n    }\n  }\n"]);return b=function(){return n},n}function v(){let n=(0,r._)(["\n  query GetTag($slug: String!) {\n    tag(slug: $slug) {\n      id\n      name\n      slug\n    }\n  }\n"]);return v=function(){return n},n}function y(){let n=(0,r._)(["\n  query GetEnum($name: String!) {\n    __type(name: $name) {\n      enumValues {\n        name\n      }\n    }\n  }\n"]);return y=function(){return n},n}function P(){let n=(0,r._)(["\n  query Viewer {\n    viewer {\n      name\n      email\n      image\n    }\n  }\n"]);return P=function(){return n},n}function $(){let n=(0,r._)(["\n  query Me {\n    me {\n      name\n      email\n      image\n      team {\n        name\n        slug\n        description\n        avatar\n        status\n      }\n    }\n  }\n"]);return $=function(){return n},n}function x(){let n=(0,r._)(["\n  mutation LoginUser($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      name\n    }\n  }\n"]);return x=function(){return n},n}function I(){let n=(0,r._)(["\n  mutation Logout {\n    logout {\n      name\n    }\n  }\n"]);return I=function(){return n},n}function w(){let n=(0,r._)(["\n  mutation Upload($file: Upload!) {\n    upload(file: $file)\n  }\n"]);return w=function(){return n},n}function N(){let n=(0,r._)(["\n  mutation RemoteFileUpload($url: String!) {\n    remoteFile(url: $url)\n  }\n"]);return N=function(){return n},n}function k(){let n=(0,r._)(["\n  mutation LoginWxCode {\n    loginWxCode\n  }\n"]);return k=function(){return n},n}function j(){let n=(0,r._)(["\n  mutation LoginWxCheck {\n    loginWxCheck\n  }\n"]);return j=function(){return n},n}function C(){let n=(0,r._)(["\n  query GetQuestion($slug: String!) {\n    question(uuid: $slug) {\n      uuid\n      title\n      body\n      keywords\n      answer_count\n      created_at_diff_humans\n      user {\n        name\n        uuid\n        nickname\n        image\n      }\n      answers {\n        uuid\n        body\n        accepted\n        created_at_diff_humans\n        user {\n          name\n          uuid\n          nickname\n          image\n          description\n        }\n      }\n    }\n    randomQuestions {\n      uuid\n      title\n      body\n      keywords\n      answer_count\n      created_at_diff_humans\n    }\n  }\n"]);return C=function(){return n},n}function S(){let n=(0,r._)(["\n  query GetQuestions($first: Int = 20, $after: String) {\n    questions(first: $first, after: $after) {\n      edges {\n        cursor\n        node {\n          uuid\n          title\n          body\n          keywords\n          answer_count\n          created_at_diff_humans\n          user {\n            name\n            nickname\n          }\n        }\n      }\n      pageInfo {\n        ...replayPageInfoFragment\n      }\n    }\n    randomQuestions {\n      uuid\n      title\n      body\n      keywords\n      answer_count\n      created_at_diff_humans\n    }\n  }\n  ","\n"]);return S=function(){return n},n}function F(){let n=(0,r._)(["\n  mutation CreatePost($input: CreatePostInput) {\n    createPost(input: $input) {\n      id\n      title\n      body\n      publish_status\n      status\n      slug\n      user {\n        name\n      }\n    }\n  }\n"]);return F=function(){return n},n}function q(){let n=(0,r._)(["\n  mutation UpdatePost($id: ID!, $input: UpdatePostInput!) {\n    updatePost(id: $id, input: $input) {\n      ...postListItemFragment\n      body\n    }\n  }\n  ","\n"]);return q=function(){return n},n}function U(){let n=(0,r._)(["\n  mutation UpdateUser($input: UpdateUserInput!) {\n    updateUser(input: $input) {\n      uuid\n      name\n    }\n  }\n"]);return U=function(){return n},n}(0,s.Ps)(d(),a,c),(0,s.Ps)(f());let L=(0,s.Ps)(g(),a,c),G=(0,s.Ps)(m(),a),M=(0,s.Ps)(p(),a,c),V=(0,s.Ps)(h(),a,l);(0,s.Ps)(_());let O=(0,s.Ps)(b());(0,s.Ps)(v());let E=(0,s.Ps)(y()),R=(0,s.Ps)(P()),W=(0,s.Ps)($()),D=(0,s.Ps)(x()),Q=(0,s.Ps)(I()),A=(0,s.Ps)(w()),T=(0,s.Ps)(N()),B=(0,s.Ps)(k()),z=(0,s.Ps)(j()),X=(0,s.Ps)(C()),H=(0,s.Ps)(S(),c),J=(0,s.Ps)(F()),Y=(0,s.Ps)(q(),a),K=(0,s.Ps)(U())},18161:function(n,t,e){"use strict";e.d(t,{WendaList:function(){return a}});var r=e(57437),s=e(27648),i=e(54992),u=e(28819),o=e(50921);function a(){let{data:{questions:n,randomQuestions:t},fetchMore:e}=(0,i.kJ)(o.pk),a=n.pageInfo;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-3 bg-card px-5 py-4",children:(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"card-title text-xl font-semibold",children:"最新问答"})})}),(0,r.jsx)("div",{children:n.edges.map((n,t)=>{let{node:e}=n;return(0,r.jsx)("div",{className:"mb-2 flex gap-4 border-b border-muted bg-card p-4",children:(0,r.jsxs)("div",{className:"flex flex-1 flex-col justify-between gap-4",children:[(0,r.jsx)("div",{className:"line-clamp-2 text-base font-bold leading-5 md:text-xl",children:(0,r.jsx)(s.default,{href:"/wenda/"+e.uuid,children:e.title})}),(0,r.jsxs)("div",{className:"flex text-sm text-muted-foreground",children:[(0,r.jsxs)("div",{className:"bg-muted",children:["@ ",e.user.nickname]}),(0,r.jsxs)("div",{className:"ml-3",children:[e.created_at_diff_humans," 提问"]}),(0,r.jsx)("div",{className:"ml-auto"})]})]})},t)})}),(0,r.jsx)(u.df,{onChange:async(n,t)=>{n&&(null==a?void 0:a.hasNextPage)&&e({variables:{after:a.endCursor}})},children:(0,r.jsx)("div",{className:"mt-4 text-center",children:(null==a?void 0:a.hasNextPage)?"加载更多":"没有更多了"})})]})}),(0,r.jsx)("div",{className:"xl:w-80",children:(0,r.jsxs)("div",{className:"sticky top-[80px] bg-card px-5 py-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"card-title text-xl font-semibold",children:"推荐问答"})}),(0,r.jsx)("ul",{className:"mt-4 flex flex-col gap-4",children:t.map((n,t)=>(0,r.jsx)("li",{className:"flex items-center gap-2 text-sm",children:(0,r.jsx)(s.default,{href:"/wenda/"+n.uuid,children:n.title})},t))})]})})]})}},27648:function(n,t,e){"use strict";e.d(t,{default:function(){return s.a}});var r=e(72972),s=e.n(r)},28819:function(n,t,e){"use strict";e.d(t,{df:function(){return d}});var r=e(2265),s=Object.defineProperty,i=(n,t,e)=>t in n?s(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,u=(n,t,e)=>i(n,"symbol"!=typeof t?t+"":t,e),o=new Map,a=new WeakMap,l=0,c=void 0,d=class extends r.Component{componentDidMount(){this.unobserve(),this.observeNode()}componentDidUpdate(n){(n.rootMargin!==this.props.rootMargin||n.root!==this.props.root||n.threshold!==this.props.threshold||n.skip!==this.props.skip||n.trackVisibility!==this.props.trackVisibility||n.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve()}observeNode(){if(!this.node||this.props.skip)return;let{threshold:n,root:t,rootMargin:e,trackVisibility:r,delay:s,fallbackInView:i}=this.props;this._unobserveCb=function(n,t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c;if(void 0===window.IntersectionObserver&&void 0!==r){let s=n.getBoundingClientRect();return t(r,{isIntersecting:r,target:n,intersectionRatio:"number"==typeof e.threshold?e.threshold:0,time:0,boundingClientRect:s,intersectionRect:s,rootBounds:s}),()=>{}}let{id:s,observer:i,elements:u}=function(n){let t=Object.keys(n).sort().filter(t=>void 0!==n[t]).map(t=>{var e;return"".concat(t,"_").concat("root"===t?(e=n.root)?(a.has(e)||(l+=1,a.set(e,l.toString())),a.get(e)):"0":n[t])}).toString(),e=o.get(t);if(!e){let r;let s=new Map,i=new IntersectionObserver(t=>{t.forEach(t=>{var e;let i=t.isIntersecting&&r.some(n=>t.intersectionRatio>=n);n.trackVisibility&&void 0===t.isVisible&&(t.isVisible=i),null==(e=s.get(t.target))||e.forEach(n=>{n(i,t)})})},n);r=i.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),e={id:t,observer:i,elements:s},o.set(t,e)}return e}(e),d=u.get(n)||[];return u.has(n)||u.set(n,d),d.push(t),i.observe(n),function(){d.splice(d.indexOf(t),1),0===d.length&&(u.delete(n),i.unobserve(n)),0===u.size&&(i.disconnect(),o.delete(s))}}(this.node,this.handleChange,{threshold:n,root:t,rootMargin:e,trackVisibility:r,delay:s},i)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){let{children:n}=this.props;if("function"==typeof n){let{inView:t,entry:e}=this.state;return n({inView:t,entry:e,ref:this.handleNode})}let{as:t,triggerOnce:e,threshold:s,root:i,rootMargin:u,onChange:o,skip:a,trackVisibility:l,delay:c,initialInView:d,fallbackInView:f,...g}=this.props;return r.createElement(t||"div",{ref:this.handleNode,...g},n)}constructor(n){super(n),u(this,"node",null),u(this,"_unobserveCb",null),u(this,"handleNode",n=>{!this.node||(this.unobserve(),n||this.props.triggerOnce||this.props.skip||this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=n||null,this.observeNode()}),u(this,"handleChange",(n,t)=>{n&&this.props.triggerOnce&&this.unobserve(),"function"!=typeof this.props.children||this.setState({inView:n,entry:t}),this.props.onChange&&this.props.onChange(n,t)}),this.state={inView:!!n.initialInView,entry:void 0}}}}},function(n){n.O(0,[2972,9485,2995,9064,4992,2971,2117,1744],function(){return n(n.s=48170)}),_N_E=n.O()}]);