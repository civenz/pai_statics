(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2346],{71867:function(n,e,t){Promise.resolve().then(t.bind(t,22499)),Promise.resolve().then(t.t.bind(t,65878,23)),Promise.resolve().then(t.t.bind(t,72972,23))},50921:function(n,e,t){"use strict";t.d(e,{Sx:function(){return X},Xv:function(){return z},UC:function(){return E},uA:function(){return L},QI:function(){return G},p$:function(){return A},Rz:function(){return O},pk:function(){return V},Ys:function(){return W},L4:function(){return H},uS:function(){return Y},Nv:function(){return Z},ME:function(){return M},iw:function(){return Q},NF:function(){return D},vG:function(){return B},AX:function(){return J},uk:function(){return T},ad:function(){return R}});var r=t(45008),a=t(2559);function s(){let n=(0,r._)(["\n  fragment postListItemFragment on Post {\n    id\n    title\n    slug\n    summary\n    url\n    cover_image\n    publish_status\n    view_count\n    status\n    status_desc\n    created_at\n    published_at\n    publish_at_diff_humans\n    deleted_at\n  }\n"]);return s=function(){return n},n}function u(){let n=(0,r._)(["\n  fragment paginatorInfoFragment on PaginatorInfo {\n    count\n    currentPage\n    firstItem\n    hasMorePages\n    lastItem\n    lastPage\n    perPage\n    total\n  }\n"]);return u=function(){return n},n}function i(){let n=(0,r._)(["\n  fragment replayPageInfoFragment on PageInfo {\n      endCursor\n      count\n      currentPage\n      hasNextPage\n      hasPreviousPage\n      lastPage\n      startCursor\n      total\n    }\n"]);return i=function(){return n},n}let o=(0,a.Ps)(s()),l=(0,a.Ps)(u()),c=(0,a.Ps)(i());function f(){let n=(0,r._)(["\n  query GetPostsByCategory(\n    $category: String\n    $first: Int = 10\n    $after: String\n  ) {\n    posts(first: $first, after: $after, term_ids: $category) {\n      edges {\n        cursor\n        node {\n          ...postListItemFragment\n          user {\n            name\n          }\n          team {\n            slug\n            name\n          }\n          tags {\n            name\n            slug\n          }\n        }\n      }\n      pageInfo {\n        ...replayPageInfoFragment\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return n},n}function d(){let n=(0,r._)(["\n  query GetCategorys {\n    categories {\n      id\n      name\n      slug\n    }\n  }\n"]);return d=function(){return n},n}function m(){let n=(0,r._)(["\n  query GetNews($first: Int = 20, $after: String) {\n    posts(first: $first, show_mode: News, after: $after) {\n      edges {\n        cursor\n        node {\n          ...postListItemFragment\n        }\n      }\n      pageInfo {\n        ...replayPageInfoFragment\n      }\n    }\n  }\n  ","\n  ","\n"]);return m=function(){return n},n}function g(){let n=(0,r._)(["\n  query GetPost($slug: String!) {\n    post(slug: $slug) {\n      ...postListItemFragment\n      body\n      source_url\n      user {\n        name\n        nickname\n        image\n      }\n      team {\n        slug\n        name\n        description\n        avatar\n      }\n      tags {\n        name\n        slug\n      }\n    }\n  }\n  ","\n"]);return g=function(){return n},n}function p(){let n=(0,r._)(["\n  query GetPosts(\n    $first: Int = 20\n    $after: String\n    $show_mode: PostShowMode\n    $type: PostType\n    $category: String\n    $tag: String\n  ) {\n    posts(\n      first: $first\n      after: $after\n      show_mode: $show_mode\n      type: $type\n      term_ids: $category\n      tag_ids: $tag\n    ) {\n      edges {\n        cursor\n        node {\n          ...postListItemFragment\n          user {\n            name\n            nickname\n            image\n          }\n          team {\n            slug\n            name\n            avatar\n          }\n          tags {\n            name\n            slug\n          }\n        }\n      }\n      pageInfo {\n        ...replayPageInfoFragment\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return n},n}function h(){let n=(0,r._)(["\n  query MyPosts(\n    $first: Int!\n    $page: Int\n    $status: [PostStatus]\n    $publish_status: [PostPublishStatus]\n  ) {\n    viewer {\n      name\n      email\n      posts(\n        first: $first\n        page: $page\n        status: $status\n        publish_status: $publish_status\n      ) {\n        data {\n          ...postListItemFragment\n        }\n        paginatorInfo {\n          ...paginatorInfoFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return n},n}function _(){let n=(0,r._)(["\n  query GetHotTags {\n    hotTags {\n      id\n      name\n      slug\n    }\n  }\n"]);return _=function(){return n},n}function x(){let n=(0,r._)(["\n  mutation DeletePost($id: ID!) {\n    deletePost(id: $id) {\n      id\n      slug\n    }\n  }\n"]);return x=function(){return n},n}function P(){let n=(0,r._)(["\n  query GetTag($slug: String!) {\n    tag(slug: $slug) {\n      id\n      name\n      slug\n    }\n  }\n"]);return P=function(){return n},n}function v(){let n=(0,r._)(["\n  query GetEnum($name: String!) {\n    __type(name: $name) {\n      enumValues {\n        name\n      }\n    }\n  }\n"]);return v=function(){return n},n}function $(){let n=(0,r._)(["\n  query Viewer {\n    viewer {\n      name\n      email\n      image\n    }\n  }\n"]);return $=function(){return n},n}function y(){let n=(0,r._)(["\n  query Me {\n    me {\n      name\n      email\n      image\n      team {\n        name\n        slug\n        description\n        avatar\n        status\n      }\n    }\n  }\n"]);return y=function(){return n},n}function w(){let n=(0,r._)(["\n  mutation LoginUser($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      name\n    }\n  }\n"]);return w=function(){return n},n}function b(){let n=(0,r._)(["\n  mutation Logout {\n    logout {\n      name\n    }\n  }\n"]);return b=function(){return n},n}function I(){let n=(0,r._)(["\n  mutation Upload($file: Upload!) {\n    upload(file: $file)\n  }\n"]);return I=function(){return n},n}function N(){let n=(0,r._)(["\n  mutation RemoteFileUpload($url: String!) {\n    remoteFile(url: $url)\n  }\n"]);return N=function(){return n},n}function j(){let n=(0,r._)(["\n  mutation LoginWxCode {\n    loginWxCode\n  }\n"]);return j=function(){return n},n}function k(){let n=(0,r._)(["\n  mutation LoginWxCheck {\n    loginWxCheck\n  }\n"]);return k=function(){return n},n}function S(){let n=(0,r._)(["\n  query GetQuestion($slug: String!) {\n    question(uuid: $slug) {\n      uuid\n      title\n      body\n      keywords\n      answer_count\n      created_at_diff_humans\n      user {\n        name\n        uuid\n        nickname\n        image\n      }\n      answers {\n        uuid\n        body\n        accepted\n        created_at_diff_humans\n        user {\n          name\n          uuid\n          nickname\n          image\n          description\n        }\n      }\n    }\n    randomQuestions {\n      uuid\n      title\n      body\n      keywords\n      answer_count\n      created_at_diff_humans\n    }\n  }\n"]);return S=function(){return n},n}function F(){let n=(0,r._)(["\n  query GetQuestions($first: Int = 20, $after: String) {\n    questions(first: $first, after: $after) {\n      edges {\n        cursor\n        node {\n          uuid\n          title\n          body\n          keywords\n          answer_count\n          created_at_diff_humans\n          user {\n            name\n            nickname\n          }\n        }\n      }\n      pageInfo {\n        ...replayPageInfoFragment\n      }\n    }\n    randomQuestions {\n      uuid\n      title\n      body\n      keywords\n      answer_count\n      created_at_diff_humans\n    }\n  }\n  ","\n"]);return F=function(){return n},n}function C(){let n=(0,r._)(["\n  mutation CreatePost($input: CreatePostInput) {\n    createPost(input: $input) {\n      id\n      title\n      body\n      publish_status\n      status\n      slug\n      user {\n        name\n      }\n    }\n  }\n"]);return C=function(){return n},n}function q(){let n=(0,r._)(["\n  mutation UpdatePost($id: ID!, $input: UpdatePostInput!) {\n    updatePost(id: $id, input: $input) {\n      ...postListItemFragment\n      body\n    }\n  }\n  ","\n"]);return q=function(){return n},n}function U(){let n=(0,r._)(["\n  mutation UpdateUser($input: UpdateUserInput!) {\n    updateUser(input: $input) {\n      uuid\n      name\n    }\n  }\n"]);return U=function(){return n},n}(0,a.Ps)(f(),o,c),(0,a.Ps)(d());let L=(0,a.Ps)(m(),o,c),G=(0,a.Ps)(g(),o),A=(0,a.Ps)(p(),o,c),Q=(0,a.Ps)(h(),o,l);(0,a.Ps)(_());let z=(0,a.Ps)(x());(0,a.Ps)(P());let E=(0,a.Ps)(v()),R=(0,a.Ps)($()),M=(0,a.Ps)(y()),W=(0,a.Ps)(w()),Z=(0,a.Ps)(b()),T=(0,a.Ps)(I()),D=(0,a.Ps)(N()),Y=(0,a.Ps)(j()),H=(0,a.Ps)(k()),O=(0,a.Ps)(S()),V=(0,a.Ps)(F(),c),X=(0,a.Ps)(C()),B=(0,a.Ps)(q(),o),J=(0,a.Ps)(U())},22499:function(n,e,t){"use strict";t.d(e,{SiteZhuanlan:function(){return p}});var r=t(57437),a=t(2265),s=t(33145),u=t(27648),i=t(99376),o=t(63251),l=t(5298),c=t(76399),f=t(28819),d=t(94508),m=t(50921),g=t(16831);let p=n=>{let{tag:e,tags:t,posts:p}=n,h=decodeURIComponent((0,i.usePathname)());"/zhuanlan"===h&&(h="/zhuanlan/");let[_,x]=(0,a.useState)(p),P=_.pageInfo,v=(0,o.x)();v.readQuery({query:m.p$,variables:{tag:(null==e?void 0:e.id)||void 0,show_mode:"Zhuanlan",first:20}})||v.writeQuery({query:m.p$,variables:{tag:(null==e?void 0:e.id)||void 0,show_mode:"Zhuanlan",first:20},data:{posts:p}});let[$,{fetchMore:y}]=(0,l.t)(m.p$,{variables:{tag:(null==e?void 0:e.id)||void 0,show_mode:"Zhuanlan",first:20,after:P.endCursor}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-3 flex gap-x-5 bg-card p-5",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(c.Z,{color:"#f64f50"}),(0,r.jsx)("span",{className:"font-bold",children:"热门关键词"})]}),(0,r.jsx)("div",{className:"flex flex-1 flex-wrap gap-3 gap-x-8",children:t.map((n,e)=>(0,r.jsx)(u.default,{href:"/zhuanlan/".concat(n.slug),className:(0,d.cn)("hover:text-primary",h==="/zhuanlan/".concat(n.slug)&&"text-primary"),rel:n.slug?"nofollow":"",children:n.name},e))})]}),(0,r.jsxs)("div",{children:[_.edges.map((n,e)=>{let{node:t}=n;return(0,r.jsxs)("div",{className:"mb-2 flex gap-4 border-b border-muted bg-card p-4",children:[t.cover_image&&(0,r.jsx)("div",{className:"trans__scale relative h-[70px] w-[105px] shrink-0 overflow-hidden lg:h-[130px] lg:w-[195px]",children:(0,r.jsx)(u.default,{href:t.url,className:"absolute inset-0",children:(0,r.jsx)(s.default,{src:t.cover_image,alt:"",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"},t.slug)})}),(0,r.jsxs)("div",{className:"flex min-h-[70px] flex-1 flex-col justify-between lg:min-h-[113px]",children:[(0,r.jsx)("h2",{className:"line-clamp-2 text-base font-bold leading-5 md:text-xl",children:(0,r.jsx)(u.default,{href:t.url,children:t.title})}),(0,r.jsx)("div",{className:"mt-1 hidden break-all text-sm text-foreground/60 md:line-clamp-2",children:t.summary}),(0,r.jsxs)("div",{className:"mt-auto flex text-sm text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-end gap-3 text-card-foreground",children:[t.team.avatar&&(0,r.jsxs)(g.Avatar,{className:"size-5",children:[(0,r.jsx)(g.AvatarImage,{src:t.team.avatar}),(0,r.jsx)(g.AvatarFallback,{})]}),t.team.name]}),(0,r.jsx)("div",{className:"ml-3 hidden gap-x-3 md:flex",children:t.tags.map((n,e)=>(0,r.jsx)("span",{children:n.name}))}),(0,r.jsx)("div",{className:"ml-auto",children:t.publish_at_diff_humans})]})]})]},e)}),(0,r.jsx)(f.df,{as:"div",onChange:async(n,e)=>{if(n&&(null==P?void 0:P.hasNextPage)){let{data:{posts:n}}=await y({variables:{after:P.endCursor}});x(function(e){return{...e,edges:[...e.edges,...n.edges],pageInfo:n.pageInfo}})}},children:P?(0,r.jsx)("div",{className:"mt-4 text-center",children:(null==P?void 0:P.hasNextPage)?"加载更多":"没有更多了"}):(0,r.jsx)("div",{className:"mt-4 text-center",children:"加载中..."})})]})]})}},16831:function(n,e,t){"use strict";t.d(e,{Avatar:function(){return i},AvatarFallback:function(){return l},AvatarImage:function(){return o}});var r=t(57437),a=t(2265),s=t(61146),u=t(94508);let i=a.forwardRef((n,e)=>{let{className:t,...a}=n;return(0,r.jsx)(s.fC,{ref:e,className:(0,u.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...a})});i.displayName=s.fC.displayName;let o=a.forwardRef((n,e)=>{let{className:t,...a}=n;return(0,r.jsx)(s.Ee,{ref:e,className:(0,u.cn)("aspect-square h-full w-full",t),...a})});o.displayName=s.Ee.displayName;let l=a.forwardRef((n,e)=>{let{className:t,...a}=n;return(0,r.jsx)(s.NY,{ref:e,className:(0,u.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...a})});l.displayName=s.NY.displayName},94508:function(n,e,t){"use strict";t.d(e,{HQ:function(){return u},cn:function(){return s}});var r=t(61994),a=t(53335);function s(){for(var n=arguments.length,e=Array(n),t=0;t<n;t++)e[t]=arguments[t];return(0,a.m6)((0,r.W)(e))}function u(n,e){return"news"==e?n.includes(".html")?"/news-flash/".concat(n):"/news/".concat(n):n.length<7?"/".concat(n,".html"):"/p/".concat(n)}}},function(n){n.O(0,[6137,2972,9485,2995,9064,5878,5306,1102,2971,2117,1744],function(){return n(n.s=71867)}),_N_E=n.O()}]);